{"version":3,"file":"7.index.js","mappings":"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","sources":["webpack://axolotis-player/./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack://axolotis-player/./src/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder.ts","webpack://axolotis-player/./src/lib/modules/controller/pathFindingPlayer/NavMeshPlayer.ts"],"sourcesContent":["import{BufferAttribute as t,BufferGeometry as e,Vector3 as r,Plane as n,Triangle as o,Color as i,Line as s,Mesh as a,SphereBufferGeometry as u,MeshBasicMaterial as h,BoxBufferGeometry as c,Object3D as l,LineBasicMaterial as p}from\"three\";function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){var r;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if(\"string\"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===r&&t.constructor&&(r=t.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(t):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t))||e&&t&&\"number\"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(r=t[Symbol.iterator]()).next.bind(r)}var v,g=function(){function r(){}return r.roundNumber=function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r},r.sample=function(t){return t[Math.floor(Math.random()*t.length)]},r.distanceToSquared=function(t,e){var r=t.x-e.x,n=t.y-e.y,o=t.z-e.z;return r*r+n*n+o*o},r.isPointInPoly=function(t,e){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].z<=e.z&&e.z<t[i].z||t[i].z<=e.z&&e.z<t[n].z)&&e.x<(t[i].x-t[n].x)*(e.z-t[n].z)/(t[i].z-t[n].z)+t[n].x&&(r=!r);return r},r.isVectorInPolygon=function(t,e,r){var n=1e5,o=-1e5,i=[];return e.vertexIds.forEach(function(t){n=Math.min(r[t].y,n),o=Math.max(r[t].y,o),i.push(r[t])}),!!(t.y<o+.5&&t.y>n-.5&&this.isPointInPoly(i,t))},r.triarea2=function(t,e,r){return(r.x-t.x)*(e.z-t.z)-(e.x-t.x)*(r.z-t.z)},r.vequal=function(t,e){return this.distanceToSquared(t,e)<1e-5},r.mergeVertices=function(r,n){void 0===n&&(n=1e-4),n=Math.max(n,Number.EPSILON);for(var o={},i=r.getIndex(),s=r.getAttribute(\"position\"),a=i?i.count:s.count,u=0,h=[],c=[],l=Math.log10(1/n),p=Math.pow(10,l),d=0;d<a;d++){var f=i?i.getX(d):d,v=\"\";v+=~~(s.getX(f)*p)+\",\",v+=~~(s.getY(f)*p)+\",\",(v+=~~(s.getZ(f)*p)+\",\")in o?h.push(o[v]):(c.push(s.getX(f)),c.push(s.getY(f)),c.push(s.getZ(f)),o[v]=u,h.push(u),u++)}var g=new t(new Float32Array(c),s.itemSize,s.normalized),b=new e;return b.setAttribute(\"position\",g),b.setIndex(h),b},r}(),b=function(){function t(t){this.content=[],this.scoreFunction=t}var e=t.prototype;return e.push=function(t){this.content.push(t),this.sinkDown(this.content.length-1)},e.pop=function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},e.remove=function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},e.size=function(){return this.content.length},e.rescoreElement=function(t){this.sinkDown(this.content.indexOf(t))},e.sinkDown=function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},e.bubbleUp=function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var o=t+1<<1,i=o-1,s=null,a=void 0;if(i<e&&(a=this.scoreFunction(this.content[i]))<n&&(s=i),o<e&&this.scoreFunction(this.content[o])<(null===s?n:a)&&(s=o),null===s)break;this.content[t]=this.content[s],this.content[s]=r,t=s}},t}(),y=function(){function t(){}return t.init=function(t){for(var e=0;e<t.length;e++){var r=t[e];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}},t.cleanUp=function(t){for(var e=0;e<t.length;e++){var r=t[e];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}},t.heap=function(){return new b(function(t){return t.f})},t.search=function(t,e,r){this.init(t);var n=this.heap();for(n.push(e);n.size()>0;){var o=n.pop();if(o===r){for(var i=o,s=[];i.parent;)s.push(i),i=i.parent;return this.cleanUp(s),s.reverse()}o.closed=!0;for(var a=this.neighbours(t,o),u=0,h=a.length;u<h;u++){var c=a[u];if(!c.closed){var l=o.g+c.cost,p=c.visited;if(!p||l<c.g){if(c.visited=!0,c.parent=o,!c.centroid||!r.centroid)throw new Error(\"Unexpected state\");c.h=c.h||this.heuristic(c.centroid,r.centroid),c.g=l,c.f=c.g+c.h,p?n.rescoreElement(c):n.push(c)}}}}return[]},t.heuristic=function(t,e){return g.distanceToSquared(t,e)},t.neighbours=function(t,e){for(var r=[],n=0;n<e.neighbours.length;n++)r.push(t[e.neighbours[n]]);return r},t}(),m=function(){function t(){}return t.buildZone=function(t,e){var n=this,o=this._buildNavigationMesh(t,e),i={};o.vertices.forEach(function(t){t.x=g.roundNumber(t.x,2),t.y=g.roundNumber(t.y,2),t.z=g.roundNumber(t.z,2)}),i.vertices=o.vertices;var s=this._buildPolygonGroups(o);return i.groups=new Array(s.length),s.forEach(function(t,e){var o=new Map;t.forEach(function(t,e){o.set(t,e)});var s=new Array(t.length);t.forEach(function(t,e){var a=[];t.neighbours.forEach(function(t){return a.push(o.get(t))});var u=[];t.neighbours.forEach(function(e){return u.push(n._getSharedVerticesInOrder(t,e))});var h=new r(0,0,0);h.add(i.vertices[t.vertexIds[0]]),h.add(i.vertices[t.vertexIds[1]]),h.add(i.vertices[t.vertexIds[2]]),h.divideScalar(3),h.x=g.roundNumber(h.x,2),h.y=g.roundNumber(h.y,2),h.z=g.roundNumber(h.z,2),s[e]={id:e,neighbours:a,vertexIds:t.vertexIds,centroid:h,portals:u}}),i.groups[e]=s}),i},t._buildNavigationMesh=function(t,e){return t=g.mergeVertices(t,e),this._buildPolygonsFromGeometry(t)},t._spreadGroupId=function(t){for(var e=new Set([t]);e.size>0;){var r=e;e=new Set,r.forEach(function(r){r.group=t.group,r.neighbours.forEach(function(t){void 0===t.group&&e.add(t)})})}},t._buildPolygonGroups=function(t){var e=this,r=[];return t.polygons.forEach(function(t){void 0!==t.group?r[t.group].push(t):(t.group=r.length,e._spreadGroupId(t),r.push([t]))}),r},t._buildPolygonNeighbours=function(t,e){var r=new Set,n=e[t.vertexIds[1]],o=e[t.vertexIds[2]];return e[t.vertexIds[0]].forEach(function(e){e!==t&&(n.includes(e)||o.includes(e))&&r.add(e)}),n.forEach(function(e){e!==t&&o.includes(e)&&r.add(e)}),r},t._buildPolygonsFromGeometry=function(t){for(var e=this,n=[],o=[],i=t.attributes.position,s=t.index,a=[],u=0;u<i.count;u++)o.push((new r).fromBufferAttribute(i,u)),a[u]=[];for(var h=0;h<t.index.count;h+=3){var c=s.getX(h),l=s.getX(h+1),p=s.getX(h+2),d={vertexIds:[c,l,p],neighbours:null};n.push(d),a[c].push(d),a[l].push(d),a[p].push(d)}return n.forEach(function(t){t.neighbours=e._buildPolygonNeighbours(t,a)}),{polygons:n,vertices:o}},t._getSharedVerticesInOrder=function(t,e){var r=t.vertexIds,n=r[0],o=r[1],i=r[2],s=e.vertexIds,a=s.includes(n),u=s.includes(o),h=s.includes(i);return a&&u&&h?Array.from(r):a&&u?[n,o]:u&&h?[o,i]:a&&h?[i,n]:(console.warn(\"Error processing navigation mesh neighbors; neighbors with <2 shared vertices found.\"),[])},t}(),w=function(){function t(){this.portals=[]}var e=t.prototype;return e.push=function(t,e){void 0===e&&(e=t),this.portals.push({left:t,right:e})},e.stringPull=function(){var t,e,r,n=this.portals,o=[],i=0,s=0,a=0;e=n[0].left,r=n[0].right,o.push(t=n[0].left);for(var u=1;u<n.length;u++){var h=n[u].left,c=n[u].right;if(g.triarea2(t,r,c)<=0){if(!(g.vequal(t,r)||g.triarea2(t,e,c)>0)){o.push(e),e=t=e,r=t,s=i=s,a=i,u=i;continue}r=c,a=u}if(g.triarea2(t,e,h)>=0){if(!(g.vequal(t,e)||g.triarea2(t,r,h)<0)){o.push(r),e=t=r,r=t,s=i=a,a=i,u=i;continue}e=h,s=u}}return 0!==o.length&&g.vequal(o[o.length-1],n[n.length-1].left)||o.push(n[n.length-1].left),this.path=o,o},t}(),_=function(){function t(){this.zones={}}t.createZone=function(t,e){return void 0===e&&(e=1e-4),m.buildZone(t,e)};var e=t.prototype;return e.setZoneData=function(t,e){this.zones[t]=e},e.getRandomNode=function(t,e,n,o){if(!this.zones[t])return new r;n=n||null,o=o||0;var i=[];return this.zones[t].groups[e].forEach(function(t){n&&o?g.distanceToSquared(n,t.centroid)<o*o&&i.push(t.centroid):i.push(t.centroid)}),g.sample(i)||new r},e.getClosestNode=function(t,e,r,n){void 0===n&&(n=!1);var o=this.zones[e].vertices,i=null,s=Infinity;return this.zones[e].groups[r].forEach(function(e){var r=g.distanceToSquared(e.centroid,t);r<s&&(!n||g.isVectorInPolygon(t,e,o))&&(i=e,s=r)}),i},e.findPath=function(t,e,n,o){var i=this.zones[n].groups[o],s=this.zones[n].vertices,a=this.getClosestNode(t,n,o,!0),u=this.getClosestNode(e,n,o,!0);if(!a||!u)return null;var h=y.search(i,a,u),c=function(t,e){for(var r=0;r<t.neighbours.length;r++)if(t.neighbours[r]===e.id)return t.portals[r]},l=new w;l.push(t);for(var p=0;p<h.length;p++){var d=h[p+1];if(d){var f=c(h[p],d);l.push(s[f[0]],s[f[1]])}}l.push(e),l.stringPull();var v=l.path.map(function(t){return new r(t.x,t.y,t.z)});return v.shift(),v},t}();_.prototype.getGroup=(v=new n,function(t,e,r){if(void 0===r&&(r=!1),!this.zones[t])return null;for(var n=null,o=Math.pow(50,2),i=this.zones[t],s=0;s<i.groups.length;s++)for(var a,u=f(i.groups[s]);!(a=u()).done;){var h=a.value;if(r&&(v.setFromCoplanarPoints(i.vertices[h.vertexIds[0]],i.vertices[h.vertexIds[1]],i.vertices[h.vertexIds[2]]),Math.abs(v.distanceToPoint(e))<.01&&g.isPointInPoly([i.vertices[h.vertexIds[0]],i.vertices[h.vertexIds[1]],i.vertices[h.vertexIds[2]]],e)))return s;var c=g.distanceToSquared(h.centroid,e);c<o&&(n=s,o=c)}return n}),_.prototype.clampStep=function(){var t,e,i=new r,s=new n,a=new o,u=new r,h=new r;return function(r,n,o,c,l,p){var d=this.zones[c].vertices,f=this.zones[c].groups[l],v=[o],g={};g[o.id]=0,t=void 0,h.set(0,0,0),e=Infinity,s.setFromCoplanarPoints(d[o.vertexIds[0]],d[o.vertexIds[1]],d[o.vertexIds[2]]),s.projectPoint(n,i),u.copy(i);for(var b=v.pop();b;b=v.pop()){a.set(d[b.vertexIds[0]],d[b.vertexIds[1]],d[b.vertexIds[2]]),a.closestPointToPoint(u,i),i.distanceToSquared(u)<e&&(t=b,h.copy(i),e=i.distanceToSquared(u));var y=g[b.id];if(!(y>2))for(var m=0;m<b.neighbours.length;m++){var w=f[b.neighbours[m]];w.id in g||(v.push(w),g[w.id]=y+1)}}return p.copy(h),t}}();var x={PLAYER:new i(15631215).convertGammaToLinear(2.2).getHex(),TARGET:new i(14469912).convertGammaToLinear(2.2).getHex(),PATH:new i(41903).convertGammaToLinear(2.2).getHex(),WAYPOINT:new i(41903).convertGammaToLinear(2.2).getHex(),CLAMPED_STEP:new i(14472114).convertGammaToLinear(2.2).getHex(),CLOSEST_NODE:new i(4417387).convertGammaToLinear(2.2).getHex()},M=function(r){var n,o;function i(){var t;return(t=r.call(this)||this)._playerMarker=new a(new u(.25,32,32),new h({color:x.PLAYER})),t._targetMarker=new a(new c(.3,.3,.3),new h({color:x.TARGET})),t._nodeMarker=new a(new c(.1,.8,.1),new h({color:x.CLOSEST_NODE})),t._stepMarker=new a(new c(.1,1,.1),new h({color:x.CLAMPED_STEP})),t._pathMarker=new l,t._pathLineMaterial=new p({color:x.PATH,linewidth:2}),t._pathPointMaterial=new h({color:x.WAYPOINT}),t._pathPointGeometry=new u(.08),t._markers=[t._playerMarker,t._targetMarker,t._nodeMarker,t._stepMarker,t._pathMarker],t._markers.forEach(function(e){e.visible=!1,t.add(e)}),t}o=r,(n=i).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var d=i.prototype;return d.setPath=function(r){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);r=[this._playerMarker.position].concat(r);var n=new e;n.setAttribute(\"position\",new t(new Float32Array(3*r.length),3));for(var o=0;o<r.length;o++)n.attributes.position.setXYZ(o,r[o].x,r[o].y+.2,r[o].z);this._pathMarker.add(new s(n,this._pathLineMaterial));for(var i=0;i<r.length-1;i++){var u=new a(this._pathPointGeometry,this._pathPointMaterial);u.position.copy(r[i]),u.position.y+=.2,this._pathMarker.add(u)}return this._pathMarker.visible=!0,this},d.setPlayerPosition=function(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this},d.setTargetPosition=function(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this},d.setNodePosition=function(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this},d.setStepPosition=function(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this},d.reset=function(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(function(t){t.visible=!1}),this},i}(l);export{_ as Pathfinding,M as PathfindingHelper};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","import { Pathfinding } from \"three-pathfinding\";\nimport { Vector3 } from \"three\";\n\nexport class NavMeshPathfinder {\n  private pathfinder: Pathfinding;\n  private mesh: any;\n  private zone: string = \"character\";\n  private navGroup: any = null;\n  private navNode: any = null;\n\n  isEnabled(): boolean {\n    return this.pathfinder && this.zone in this.pathfinder.zones;\n  }\n\n  loadMesh(mesh, zone: string = this.zone) {\n    this.pathfinder = new Pathfinding();\n    this.mesh = null;\n    this.zone = zone;\n    if (this.mesh) {\n      console.error(\"tried to load multiple nav meshes\");\n      this.removeNavMeshData();\n    }\n    const geometry = mesh.geometry;\n    geometry.applyMatrix4(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n  }\n\n  getClosestNode(pos) {\n    const pathfinder = this.pathfinder;\n    if (!pathfinder.zones[this.zone].groups[this.navGroup]) {\n      return null;\n    }\n    return (\n      pathfinder.getClosestNode(pos, this.zone, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, this.zone, this.navGroup)\n    );\n  }\n\n  findPositionOnNavMesh(\n    start: Vector3,\n    end: Vector3,\n    outPos: Vector3,\n    shouldRecomputeGroupAndNode: boolean = false\n  ) {\n    const pathfinder = this.pathfinder;\n    if (!(this.zone in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(this.zone, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode ||\n      this.navNode === null ||\n      this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      try {\n        this.navNode = pathfinder.clampStep(\n          start,\n          end,\n          this.navNode,\n          this.zone,\n          this.navGroup,\n          outPos\n        );\n      } catch (e) {\n        outPos.copy(start);\n        this.navNode = null;\n        this.navGroup = null;\n      }\n    }\n    return outPos;\n  }\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n}\n","import * as THREE from \"three\";\nimport { Euler, Quaternion, Vector3 } from \"three\";\nimport { ThreeLib } from \"@root/lib/modules/three/ThreeLib\";\nimport { Input } from \"@root/lib/modules/controller/physicPlayerControl/Input\";\nimport { FrameLoop } from \"@root/lib/modules/FrameLoop\";\nimport Component from \"@root/lib/modules/core/ecs/Component\";\nimport { WebpackLazyModule } from \"@root/lib/modules/core/loader/WebpackLoader\";\nimport { ComponentFactory } from \"@root/lib/modules/core/ecs/ComponentFactory\";\nimport { WorldEntity } from \"@root/lib/modules/core/ecs/WorldEntity\";\nimport { ServiceEntity } from \"@root/lib/modules/core/service/ServiceEntity\";\nimport { NavMeshPathfinder } from \"@root/lib/modules/controller/pathFindingPlayer/NavMeshPathfinder\";\nimport {\n  Player,\n  PlayerService,\n} from \"@root/lib/modules/controller/PlayerService\";\n\nexport class Factory\n  implements WebpackLazyModule, ComponentFactory<NavMeshPlayer>\n{\n  async create(world: WorldEntity, config: any): Promise<NavMeshPlayer> {\n    let services = world.getFirstComponentByType<ServiceEntity>(\n      ServiceEntity.name\n    );\n    let three = await services.getService<ThreeLib>(\n      \"@root/lib/modules/three/ThreeLib\"\n    );\n    let input = await services.getService<Input>(\n      \"@root/lib/modules/controller/pathFindingPlayer/Input\"\n    );\n    let playerService = await services.getService<PlayerService>(\n      \"@root/lib/modules/controller/PlayerService\"\n    );\n    let frameLoop = await services.getService<FrameLoop>(\n      \"@root/lib/modules/FrameLoop\"\n    );\n    //let position = new THREE.Vector3(2.14, 1.48, -1.36);\n    //let position = new THREE.Vector3(0,5,0);\n    let position = new THREE.Vector3(\n      (config.position && config.position.x) || 0,\n      (config.position && config.position.y) || 0,\n      (config.position && config.position.z) || 0\n    );\n    let rotation = new THREE.Quaternion().setFromAxisAngle(\n      new THREE.Vector3(0, 1, 0),\n      -Math.PI * 0.5\n    );\n    let playerControls = new NavMeshPlayer(\n      position,\n      rotation,\n      await three,\n      await input,\n      playerService\n    );\n    playerService.declarePlayer(playerControls);\n    playerControls.Initialize();\n    (await frameLoop).addLoop(NavMeshPlayer.name, (delta) => {\n      playerControls.Update(delta);\n    });\n    return playerControls;\n  }\n}\n\nconst NAV_ZONE = \"character\";\n\nexport default class NavMeshPlayer implements Component, Player {\n  private camera: any;\n  private timeZeroToMax: number;\n  private decceleration: number;\n  private speed: Vector3;\n  private maxSpeed: number;\n  private mouseSpeed: number;\n  private acceleration: number;\n  private isLocked: boolean;\n  private angles: Euler;\n  private pitch: Quaternion;\n  private jumpVelocity: number;\n  private yaw: Quaternion;\n  private tempVec: Vector3;\n  private moveDir: Vector3;\n  private yOffset: number; //playerHeight\n  private xAxis: Vector3;\n  private yAxis: Vector3;\n  private position: Vector3;\n  private positionOutTmp: Vector3 = new Vector3();\n  private positionOutTmp2: Vector3 = new Vector3();\n  private rotation: Quaternion;\n  private velocity: Vector3;\n  private navMesh: NavMeshPathfinder;\n\n  getType(): string {\n    return NavMeshPlayer.name;\n  }\n\n  askFlyMode() {}\n\n  declareNavMesh(\n    navMesh: THREE.Mesh<THREE.BufferGeometry, THREE.Material | THREE.Material[]>\n  ) {\n    this.navMesh.loadMesh(navMesh, NAV_ZONE);\n  }\n\n  teleportToLocation(x: number, y: number, z: number) {\n    this.position.copy(new THREE.Vector3(x, y, z));\n  }\n\n  getHeadPosition(targetCopy: THREE.Vector3): void {\n    targetCopy.copy(this.position);\n  }\n\n  constructor(\n    position,\n    rotation,\n    three: ThreeLib,\n    private input: Input,\n    private playerService: PlayerService\n  ) {\n    this.position = position;\n    this.rotation = rotation;\n    this.navMesh = new NavMeshPathfinder();\n\n    this.camera = three.camera;\n\n    this.timeZeroToMax = 0.08;\n\n    this.maxSpeed = 7.0;\n    this.speed = new THREE.Vector3();\n    this.acceleration = this.maxSpeed / this.timeZeroToMax;\n    this.decceleration = -7.0;\n\n    this.mouseSpeed = 0.002;\n    this.isLocked = false;\n\n    this.angles = new THREE.Euler();\n    this.pitch = new THREE.Quaternion();\n    this.yaw = new THREE.Quaternion();\n\n    this.jumpVelocity = 5;\n    this.yOffset = 2;\n    this.tempVec = new THREE.Vector3();\n    this.moveDir = new THREE.Vector3();\n    this.xAxis = new THREE.Vector3(1.0, 0.0, 0.0);\n    this.yAxis = new THREE.Vector3(0.0, 1.0, 0.0);\n    this.velocity = new THREE.Vector3();\n  }\n\n  Initialize() {\n    this.angles.setFromQuaternion(this.rotation);\n    this.UpdateRotation();\n\n    this.input.AddMouseMoveListner(this.OnMouseMove);\n\n    document.addEventListener(\"pointerlockchange\", this.OnPointerlockChange);\n\n    this.input.AddClickListner(() => {\n      if (!this.isLocked) {\n        document.body.requestPointerLock();\n      }\n    });\n  }\n\n  OnPointerlockChange = () => {\n    if (document.pointerLockElement) {\n      this.isLocked = true;\n      return;\n    }\n\n    this.isLocked = false;\n  };\n\n  OnMouseMove = (event) => {\n    if (!this.isLocked) {\n      return;\n    }\n\n    const { movementX, movementY } = event;\n\n    this.angles.y -= movementX * this.mouseSpeed;\n    this.angles.x -= movementY * this.mouseSpeed;\n\n    this.angles.x = Math.max(\n      -Math.PI / 2,\n      Math.min(Math.PI / 2, this.angles.x)\n    );\n\n    this.UpdateRotation();\n  };\n\n  UpdateRotation() {\n    this.pitch.setFromAxisAngle(this.xAxis, this.angles.x);\n    this.yaw.setFromAxisAngle(this.yAxis, this.angles.y);\n\n    this.rotation.multiplyQuaternions(this.yaw, this.pitch).normalize();\n\n    this.camera.quaternion.copy(this.rotation);\n  }\n\n  Accelarate = (direction, t) => {\n    const accel = this.tempVec\n      .copy(direction)\n      .multiplyScalar(this.acceleration * t);\n    this.speed.add(accel);\n    this.speed.clampLength(0.0, this.maxSpeed);\n  };\n\n  Deccelerate = (t) => {\n    const frameDeccel = this.tempVec\n      .copy(this.speed)\n      .multiplyScalar(this.decceleration * t);\n    this.speed.add(frameDeccel);\n  };\n\n  Update(t) {\n    t = t * 0.001;\n    const forwardFactor =\n      this.input.GetKeyDown(\"KeyS\") - this.input.GetKeyDown(\"KeyW\");\n    const rightFactor =\n      this.input.GetKeyDown(\"KeyD\") - this.input.GetKeyDown(\"KeyA\");\n    const direction = this.moveDir\n      .set(rightFactor, 0.0, forwardFactor)\n      .normalize();\n\n    this.Deccelerate(t);\n    this.Accelarate(direction, t);\n\n    const moveVector = this.tempVec.copy(this.speed);\n    moveVector.applyQuaternion(this.yaw);\n\n    this.velocity.setX(moveVector.x);\n    this.velocity.setZ(moveVector.z);\n    this.velocity.multiplyScalar(t);\n\n    this.positionOutTmp.x = this.position.x + this.velocity.x;\n    this.positionOutTmp.y = this.position.y + this.velocity.y;\n    this.positionOutTmp.z = this.position.z + this.velocity.z;\n\n    if (this.navMesh.isEnabled()) {\n      this.navMesh.findPositionOnNavMesh(\n        this.position,\n        this.positionOutTmp,\n        this.positionOutTmp2\n      );\n      this.positionOutTmp2.y = this.positionOutTmp2.y + this.yOffset; //player height\n    } else {\n      this.positionOutTmp2.copy(this.positionOutTmp);\n    }\n\n    this.camera.position.set(\n      this.positionOutTmp2.x,\n      this.positionOutTmp2.y,\n      this.positionOutTmp2.z\n    );\n    this.position.copy(this.camera.position);\n  }\n}\n"],"names":["d","t","e","length","r","n","Array","f","Symbol","iterator","isArray","Object","prototype","toString","call","slice","constructor","name","from","test","done","value","TypeError","next","bind","v","i","s","a","u","h","g","roundNumber","Math","pow","round","sample","floor","random","distanceToSquared","x","y","o","z","isPointInPoly","isVectorInPolygon","vertexIds","forEach","min","max","push","this","triarea2","vequal","mergeVertices","Number","EPSILON","getIndex","getAttribute","count","c","l","log10","p","getX","getY","getZ","Float32Array","itemSize","normalized","b","setAttribute","setIndex","content","scoreFunction","sinkDown","pop","bubbleUp","remove","indexOf","size","rescoreElement","init","cost","visited","closed","parent","cleanUp","heap","search","reverse","neighbours","centroid","Error","heuristic","m","buildZone","_buildNavigationMesh","vertices","_buildPolygonGroups","groups","Map","set","get","_getSharedVerticesInOrder","add","divideScalar","id","portals","_buildPolygonsFromGeometry","_spreadGroupId","Set","group","polygons","_buildPolygonNeighbours","includes","attributes","position","index","fromBufferAttribute","console","warn","w","left","right","stringPull","path","_","zones","createZone","setZoneData","getRandomNode","getClosestNode","Infinity","findPath","map","shift","getGroup","setFromCoplanarPoints","abs","distanceToPoint","clampStep","projectPoint","copy","closestPointToPoint","PLAYER","convertGammaToLinear","getHex","TARGET","PATH","WAYPOINT","CLAMPED_STEP","CLOSEST_NODE","_playerMarker","color","_targetMarker","_nodeMarker","_stepMarker","_pathMarker","_pathLineMaterial","linewidth","_pathPointMaterial","_pathPointGeometry","_markers","visible","create","__proto__","setPath","children","concat","setXYZ","setPlayerPosition","setTargetPosition","setNodePosition","setStepPosition","reset","NavMeshPathfinder","isEnabled","pathfinder","zone","loadMesh","mesh","Pathfinding","error","removeNavMeshData","geometry","applyMatrix4","matrixWorld","pos","navGroup","findPositionOnNavMesh","start","end","outPos","shouldRecomputeGroupAndNode","navNode","undefined","dispose","Factory","world","config","services","getFirstComponentByType","ServiceEntity","three","getService","input","playerService","frameLoop","THREE","rotation","setFromAxisAngle","PI","playerControls","NavMeshPlayer","declarePlayer","Initialize","addLoop","delta","Update","getType","askFlyMode","declareNavMesh","navMesh","teleportToLocation","getHeadPosition","targetCopy","Vector3","document","pointerLockElement","isLocked","event","movementX","movementY","angles","mouseSpeed","UpdateRotation","direction","accel","tempVec","multiplyScalar","acceleration","speed","clampLength","maxSpeed","frameDeccel","decceleration","camera","timeZeroToMax","pitch","yaw","jumpVelocity","yOffset","moveDir","xAxis","yAxis","velocity","setFromQuaternion","AddMouseMoveListner","OnMouseMove","addEventListener","OnPointerlockChange","AddClickListner","body","requestPointerLock","multiplyQuaternions","normalize","quaternion","forwardFactor","GetKeyDown","rightFactor","Deccelerate","Accelarate","moveVector","applyQuaternion","setX","setZ","positionOutTmp","positionOutTmp2"],"sourceRoot":""}