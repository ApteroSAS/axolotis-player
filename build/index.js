/*!
 * 
 *   @aptero/axolotis-player v2.0.0
 *   https://github.com/ApteroSAS/axolotis-player
 *
 *   Copyright (c) Aptero (https://github.com/ApteroSAS/axolotis-player) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function webpackUniversalModuleDefinition(Q,B){"object"==typeof exports&&"object"==typeof module?module.exports=B():"function"==typeof define&&define.amd?define("axolotis-player",[],B):"object"==typeof exports?exports["axolotis-player"]=B():Q["axolotis-player"]=B()}(this,(function(){return function(){"use strict";var __webpack_modules__={660:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "BUILD_VERSION": function() { return /* reexport */ BUILD_VERSION; },\n  "CODE_LOADER_MODULE_NAME": function() { return /* reexport */ CODE_LOADER_MODULE_NAME; },\n  "Entity": function() { return /* reexport */ Entity; },\n  "GLOBAL_LOCAL_MODULE": function() { return /* reexport */ GLOBAL_LOCAL_MODULE; },\n  "GLOBAL_WORLDS_ENTITY": function() { return /* reexport */ GLOBAL_WORLDS_ENTITY; },\n  "InitialComponentLoader": function() { return /* reexport */ InitialComponentLoader; },\n  "LazyEntity": function() { return /* reexport */ LazyEntity; },\n  "LazyServices": function() { return /* reexport */ LazyServices; },\n  "Services": function() { return /* reexport */ Services; },\n  "WorldEntity": function() { return /* reexport */ WorldEntity; },\n  "createWorld": function() { return /* reexport */ createWorld; },\n  "createWorldSync": function() { return /* reexport */ createWorldSync; },\n  "getGlobalStorage": function() { return /* reexport */ getGlobalStorage; },\n  "getGlobalStorageValue": function() { return /* reexport */ getGlobalStorageValue; },\n  "getGlobalWorld": function() { return /* reexport */ getGlobalWorld; },\n  "getService": function() { return /* reexport */ getService; },\n  "getServiceSync": function() { return /* reexport */ getServiceSync; },\n  "initHtml": function() { return /* reexport */ initHtml; },\n  "initHtmlFromUrl": function() { return /* reexport */ initHtmlFromUrl; },\n  "instantiateLocalAsyncModule": function() { return /* reexport */ instantiateLocalAsyncModule; },\n  "registerItem": function() { return /* reexport */ registerItem; },\n  "registerLocalModule": function() { return /* reexport */ registerLocalModule; },\n  "setGlobalStorageValue": function() { return /* reexport */ setGlobalStorageValue; }\n});\n\n;// CONCATENATED MODULE: ./src/lib/modules/core/ecs/Entity.ts\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass Entity {\n  constructor() {\n    _defineProperty(this, "components", []);\n  }\n\n  addComponent(component) {\n    if (component.init) {\n      component.init();\n    }\n\n    this.components.push(component);\n    return component;\n  }\n\n  removeAllComponents() {\n    this.components.forEach(comp => {\n      this.removeComponent(comp);\n    });\n  }\n\n  removeComponent(component) {\n    if (component.destroy) {\n      component.destroy();\n    }\n\n    this.components = this.components.filter(comp => {\n      return comp != component;\n    });\n    return component;\n  }\n\n  addComponents(components) {\n    components.forEach(comp => {\n      this.addComponent(comp);\n    });\n  }\n\n  getComponents() {\n    return this.components;\n  }\n\n  getComponentByType(type) {\n    let ret = [];\n    this.components.forEach(comp => {\n      if (comp.getType() === type) {\n        ret.push(comp);\n      }\n    });\n    return ret;\n  }\n\n  getComponentByTypeStartsWith(type) {\n    let ret = [];\n    this.components.forEach(comp => {\n      if (comp.getType().startsWith(type)) {\n        ret.push(comp);\n      }\n    });\n    return ret;\n  }\n\n  getFirstComponentByTypeStartsWith(type) {\n    return this.getComponentByTypeStartsWith(type)[0];\n  }\n\n  getFirstComponentByType(type) {\n    return this.getComponentByType(type)[0];\n  }\n\n  getType() {\n    return Entity.name;\n  }\n\n}\n/* harmony default export */ var ecs_Entity = (Entity);\n;// CONCATENATED MODULE: ./src/lib/modules/core/ecs/WorldEntity.ts\n\nclass WorldEntity extends ecs_Entity {\n  constructor() {\n    super();\n  }\n\n  getType() {\n    return WorldEntity.name;\n  }\n\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/Global.ts\nvar axolotis = null;\nconst GLOBAL_WORLDS_ENTITY = "worlds";\nconst GLOBAL_LOCAL_MODULE = "localModules";\nfunction getGlobalStorage() {\n  //not axolotis in window => create it\n  if (typeof window !== "undefined") {\n    if (!window.axolotis) {\n      window.axolotis = {};\n    }\n  } //axolotis var not initialized with window\n\n\n  if (!axolotis && typeof window !== "undefined") {\n    axolotis = window.axolotis;\n  }\n\n  if (!axolotis) {\n    axolotis = {};\n  }\n\n  return axolotis;\n}\nfunction setGlobalStorageValue(key, value) {\n  let globalStorage = getGlobalStorage();\n  globalStorage[key] = value;\n}\nfunction getGlobalStorageValue(key) {\n  let auto = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  let globalStorage = getGlobalStorage();\n\n  if (!globalStorage[key] && auto) {\n    globalStorage[key] = {};\n  }\n\n  return globalStorage[key];\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/LocalLoader.ts\n\n\n\nfunction registerLocalModule(name, module, moduleStorage) {\n  if (!moduleStorage) {\n    moduleStorage = getGlobalStorageValue(GLOBAL_LOCAL_MODULE); //GG name\n  }\n\n  if (moduleStorage[name]) {\n    throw new Error("Module already defined");\n  }\n\n  moduleStorage[name] = module;\n}\n\nfunction getClassName(module) {\n  if (module.classname) {\n    //LongModule Case\n    return module.classname;\n  } else if (module.default && module.default.name) {\n    //ShortModule case\n    return module.default.name;\n  } else {\n    console.error(module);\n    throw new Error("Malformed module");\n  }\n}\n\nasync function instantiateLocalAsyncModule(fqcn, localModules, world, config) {\n  const localModule = await localModules[fqcn]();\n  let module = localModule.module;\n\n  if (!module) {\n    module = localModule; //SortModule case definition\n  }\n\n  for (const key in module) {\n    const sub = module[key];\n\n    if (sub.prototype && sub.prototype.constructor.name === getClassName(localModule)) {\n      let DependencyComponentList = [];\n\n      if (sub.dependencies) {\n        for (let i = 0; i < sub.dependencies.length; i++) {\n          const dep = sub.dependencies[i];\n          let services = world.getFirstComponentByType(Services.name);\n          let service = await services.getService(dep);\n          DependencyComponentList.push(service);\n        }\n      }\n\n      if (config != undefined) {\n        return new sub(...DependencyComponentList, config);\n      } else {\n        return new sub(...DependencyComponentList);\n      }\n    }\n  }\n\n  throw new Error("invalid submodule " + fqcn + " - " + getClassName(localModule));\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/JsLoader.ts\n\nasync function instantiateAsyncModule(moduleName, moduleStorage, world, config) {\n  let module = null;\n\n  if (moduleStorage && moduleStorage[moduleName]) {\n    module = await instantiateLocalAsyncModule(moduleName, moduleStorage, world, config);\n  } else if (moduleName.startsWith("http")) {\n    //TODO remote module "https://"\n    throw new Error("remote modules not implemented yet");\n  } else {\n    console.log("local module installed:", moduleStorage);\n    throw new Error("unknown module - please register it - " + moduleName);\n  }\n\n  return module;\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/CodeLoader.ts\nfunction load(modules, loadedCallBack) {\n  let ret = [];\n  let nbLoaded = 0;\n\n  for (const promiseCb of modules) {\n    const promise = promiseCb(); //trigger the load\n\n    ret.push(promise);\n    promise.then(() => {\n      nbLoaded++;\n      loadedCallBack(nbLoaded, modules.length);\n    });\n  }\n\n  return Promise.all(ret);\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/InitialComponentLoader.ts\nfunction InitialComponentLoader_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nconst CODE_LOADER_MODULE_NAME = "@aptero/axolotis-player/core/loader/InitialComponentLoader";\nclass InitialComponentLoader {\n  constructor() {\n    InitialComponentLoader_defineProperty(this, "initialLoading", void 0);\n\n    InitialComponentLoader_defineProperty(this, "initialLoadingResolver", void 0);\n\n    InitialComponentLoader_defineProperty(this, "moduleStorage", void 0);\n\n    this.initialLoading = new Promise(resolve => {\n      this.initialLoadingResolver = resolve;\n    });\n  }\n\n  getType() {\n    return InitialComponentLoader.name;\n  }\n\n  getModuleStorage() {\n    return this.moduleStorage;\n  }\n\n  async awaitInitialLoading() {\n    await this.initialLoading;\n  }\n\n  async startLoading(world, scene, loadedCallBack, moduleStorage) {\n    this.moduleStorage = moduleStorage;\n\n    if (scene.version !== "2.0") {\n      throw new Error("unsupported");\n    }\n\n    let promises = [];\n\n    for (const entity of scene.entities) {\n      for (const componentDef of entity.components) {\n        let config = componentDef.config;\n        promises.push(() => new Promise(async (resolve, reject) => {\n          let module = await instantiateAsyncModule(componentDef.module, moduleStorage, world, config || {}); //module.createComponent(world, config || {});\n\n          let component = module.getType ? module : await module.createComponent(world, config || {});\n\n          if (!component.getType) {\n            throw new Error("Not a component : " + componentDef.module + " " + component.constructor.name);\n          }\n\n          world.addComponent(component); //TODO world default but should ad to an entity\n\n          resolve(module);\n        }));\n      }\n    }\n\n    let promise = load(promises, loadedCallBack);\n    promise.then(value => {\n      if (this.initialLoadingResolver !== undefined) {\n        this.initialLoadingResolver(value);\n      }\n    });\n    promise.catch(reason => {\n      console.error(reason);\n    });\n    return promise;\n  }\n\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/service/LazyServices.ts\nfunction LazyServices_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass LazyServices {\n  constructor(world) {\n    this.world = world;\n\n    LazyServices_defineProperty(this, "serviceAsync", {});\n\n    LazyServices_defineProperty(this, "service", {});\n  }\n\n  getWorld() {\n    return this.world;\n  }\n\n  setService(moduleName, service) {\n    let replace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (!replace && (this.serviceAsync[moduleName] || this.service[moduleName])) {\n      throw new Error("Service already exist (use replace to force)");\n    }\n\n    this.serviceAsync[moduleName] = Promise.resolve(service);\n    this.service[moduleName] = service;\n\n    if (service.init) {\n      service.init(); //service init\n    }\n  }\n\n  async getService(moduleName) {\n    if (this.serviceAsync[moduleName]) {\n      //service already downloading add this request to queue;\n      const service = await this.serviceAsync[moduleName];\n\n      if (!service) {\n        throw new Error("error");\n      }\n\n      return service;\n    }\n\n    if (!this.serviceAsync[moduleName]) {\n      let modulesList = (await this.serviceAsync[CODE_LOADER_MODULE_NAME]).getModuleStorage();\n      let modulePromise = instantiateAsyncModule(moduleName, modulesList, this.world);\n      this.serviceAsync[moduleName] = new Promise(async resolve => {\n        let module = await modulePromise;\n        let service = module.getType ? module : await module.createService(this);\n        this.service[moduleName] = service; //module resolved\n\n        if (service.init) {\n          service.init(); //service init\n        }\n\n        resolve(service);\n      });\n    }\n\n    return await this.serviceAsync[moduleName];\n  }\n\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/service/Services.ts\n\nclass Services extends LazyServices {\n  getType() {\n    return Services.name;\n  }\n\n  getServiceSync(moduleName) {\n    if (this.service[moduleName]) {\n      return this.service[moduleName];\n    } else {\n      throw new Error("service not found : " + moduleName);\n    }\n  }\n\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/BasicInit.ts\n\n\n\n\nfunction createWorldSync() {\n  let initialScene = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    version: "2.0",\n    entities: []\n  };\n  let loadedCallBack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n  let finished = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n  let moduleStorage = arguments.length > 3 ? arguments[3] : undefined;\n  let world = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!world) {\n    world = new WorldEntity();\n  }\n\n  if (!getGlobalStorageValue(GLOBAL_WORLDS_ENTITY, false)) {\n    setGlobalStorageValue(GLOBAL_WORLDS_ENTITY, [world]);\n  } else {\n    getGlobalStorageValue(GLOBAL_WORLDS_ENTITY).push(world);\n  }\n\n  if (!moduleStorage) {\n    moduleStorage = getGlobalStorageValue(GLOBAL_LOCAL_MODULE);\n  }\n\n  let serviceEntity = new Services(world);\n  world.addComponent(serviceEntity);\n  let staticServices = {};\n\n  if (!staticServices[CODE_LOADER_MODULE_NAME]) {\n    staticServices[CODE_LOADER_MODULE_NAME] = new InitialComponentLoader();\n  }\n\n  for (const key in staticServices) {\n    world.getFirstComponentByType(Services.name).setService(key, staticServices[key]);\n  }\n\n  staticServices[CODE_LOADER_MODULE_NAME].startLoading(world, initialScene, loadedCallBack, moduleStorage).then(() => {\n    finished(world);\n  });\n  return world;\n}\nasync function createWorld() {\n  let initialScene = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    version: "2.0",\n    entities: []\n  };\n  let loadedCallBack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n  let moduleStorage = arguments.length > 2 ? arguments[2] : undefined;\n  let world = arguments.length > 3 ? arguments[3] : undefined;\n  return new Promise(resolve => {\n    createWorldSync(initialScene, loadedCallBack, resolve, moduleStorage, world);\n  });\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/DomInit.ts\n\nconst BUILD_VERSION = (__webpack_require__(147)/* .version */ .i8);\nconsole.log("Axolotis-player version :" + BUILD_VERSION);\n\nconst windowReady = callBack => {\n  if (document.readyState === "complete" && document.body) {\n    callBack();\n  } else {\n    window.addEventListener("DOMContentLoaded", callBack);\n  }\n};\n\nasync function initHtmlFromUrl(url) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!config.onProgress) {\n    config.onProgress = (progress, total) => {\n      console.log("[" + url + "] : [" + progress + "/" + total + "]");\n    };\n  }\n\n  if (!config.onLoaded) {\n    config.onLoaded = () => {\n      console.log("[" + url + "] : loading complete");\n    };\n  }\n\n  const r = await fetch(url);\n  const html = await r.text();\n  const parser = new DOMParser();\n  const document = parser.parseFromString(html, "text/html");\n  let scene = document.body.getElementsByTagName("ax-scene"); //TODO assume only one scene\n\n  if (!scene || scene && scene.length == 0) {\n    console.warn("Axolotis scene not found (no tag ax-scene)");\n    config.onLoaded();\n    return;\n  }\n\n  console.log(scene);\n  const world = await createWorld(htmlToJson(scene), config.onProgress);\n  config.onLoaded();\n  return world;\n}\nfunction initHtml() {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (!config.onProgress) {\n    config.onProgress = (progress, total) => {\n      console.log("[" + progress + "/" + total + "]");\n    };\n  }\n\n  if (!config.onLoaded) {\n    config.onLoaded = world => {\n      console.log("loading complete");\n    };\n  }\n\n  windowReady(() => {\n    let scene = window.document.body.getElementsByTagName("ax-scene"); //TODO assume only one scene\n\n    if (!scene || scene && scene.length == 0) {\n      console.warn("Axolotis scene not found (no tag ax-scene)");\n      createWorld().then(config.onLoaded);\n      return;\n    }\n\n    console.log(scene);\n    createWorld(htmlToJson(scene), config.onProgress).then(config.onLoaded);\n  });\n}\n\nfunction htmlToJson(scene) {\n  let sceneEl = scene[0];\n  const ret = {\n    version: "2.0",\n    entities: []\n  }; // @ts-ignore\n\n  for (const entity of sceneEl.getElementsByTagName("ax-entity")) {\n    let entityRet = {\n      components: []\n    };\n\n    for (const componentEl of entity.getElementsByTagName("ax-component")) {\n      let correctJson = JSON.stringify({});\n\n      if (componentEl.getAttribute("config")) {\n        //convert relaxed json to proper json\n        correctJson = componentEl.getAttribute("config").replace(/([\'"])?([a-z0-9A-Z_]+)([\'"])?:/g, \'"$2": \');\n      }\n\n      let component = {\n        module: componentEl.getAttribute("module"),\n        config: JSON.parse(correctJson)\n      };\n      entityRet.components.push(component);\n    }\n\n    ret.entities.push(entityRet);\n  }\n\n  return ret;\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/service/ServiceUtils.ts\n\nfunction getGlobalWorld() {\n  let worlds = getGlobalStorageValue(GLOBAL_WORLDS_ENTITY, false);\n\n  if (worlds && worlds.length > 0) {\n    return worlds[0];\n  } else {\n    throw new Error("No Axolotis world initialized");\n  }\n}\nfunction getServiceSync(serviceName) {\n  let world = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!world) {\n    world = getGlobalWorld();\n  }\n\n  return world.getFirstComponentByType(Services.name).getServiceSync(serviceName);\n}\nasync function getService(serviceName) {\n  let world = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!world) {\n    world = getGlobalWorld();\n  }\n\n  return world.getFirstComponentByType(Services.name).getService(serviceName);\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/entity/LazyEntity.ts\n\n\n\nclass LazyEntity extends ecs_Entity {\n  constructor(world) {\n    super();\n    this.world = world;\n  }\n\n  async addComponentAsync(moduleName) {\n    let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let services = this.world.getFirstComponentByType(Services.name);\n    let codeLoader = await services.getService(CODE_LOADER_MODULE_NAME);\n    let modulePromise = instantiateAsyncModule(moduleName, codeLoader.getModuleStorage(), this.world, config || {});\n    let module = await await modulePromise;\n    let component = module.getType ? module : await module.createComponent(this.world, config || {});\n    return component;\n  }\n\n  getType() {\n    return LazyEntity.name;\n  }\n\n}\n;// CONCATENATED MODULE: ./src/lib/modules/core/loader/Item.ts\n\n/**\n * An Item (or SmartItem) is a set of Module (Services and/or Component)\n */\n\nfunction registerItem(item) {\n  let modules = item.modules();\n\n  for (const key in modules) {\n    registerLocalModule(key, modules[key]);\n  }\n}\n;// CONCATENATED MODULE: ./src/lib/index.ts\n/*\n * Defines what is exported\n * */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixJQUFJLENBQUNqRixPQUFMLEVBQWQ7O0VBQ0EsS0FBSyxNQUFNcEMsR0FBWCxJQUFrQm9DLE9BQWxCLEVBQTJCO0lBQ3pCOUIsbUJBQW1CLENBQUNOLEdBQUQsRUFBTW9DLE9BQU8sQ0FBQ3BDLEdBQUQsQ0FBYixDQUFuQjtFQUNEO0FBQ0YsQzs7QUNqQkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2F4b2xvdGlzLXBsYXllci8uL3NyYy9saWIvbW9kdWxlcy9jb3JlL2Vjcy9FbnRpdHkudHM/YjQxMSIsIndlYnBhY2s6Ly9heG9sb3Rpcy1wbGF5ZXIvLi9zcmMvbGliL21vZHVsZXMvY29yZS9lY3MvV29ybGRFbnRpdHkudHM/MDE5NyIsIndlYnBhY2s6Ly9heG9sb3Rpcy1wbGF5ZXIvLi9zcmMvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvR2xvYmFsLnRzPzQ2NmIiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0xvY2FsTG9hZGVyLnRzPzdkMTYiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0pzTG9hZGVyLnRzP2E5MGUiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0NvZGVMb2FkZXIudHM/YWQ0OSIsIndlYnBhY2s6Ly9heG9sb3Rpcy1wbGF5ZXIvLi9zcmMvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvSW5pdGlhbENvbXBvbmVudExvYWRlci50cz9hYzczIiwid2VicGFjazovL2F4b2xvdGlzLXBsYXllci8uL3NyYy9saWIvbW9kdWxlcy9jb3JlL2xvYWRlci9zZXJ2aWNlL0xhenlTZXJ2aWNlcy50cz9jMmVlIiwid2VicGFjazovL2F4b2xvdGlzLXBsYXllci8uL3NyYy9saWIvbW9kdWxlcy9jb3JlL2xvYWRlci9zZXJ2aWNlL1NlcnZpY2VzLnRzPzlhMjQiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0Jhc2ljSW5pdC50cz9hMDQ4Iiwid2VicGFjazovL2F4b2xvdGlzLXBsYXllci8uL3NyYy9saWIvbW9kdWxlcy9jb3JlL2xvYWRlci9Eb21Jbml0LnRzP2Y0MDgiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL3NlcnZpY2UvU2VydmljZVV0aWxzLnRzPzdhY2QiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL2VudGl0eS9MYXp5RW50aXR5LnRzPzNjMGUiLCJ3ZWJwYWNrOi8vYXhvbG90aXMtcGxheWVyLy4vc3JjL2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0l0ZW0udHM/MWU0MSIsIndlYnBhY2s6Ly9heG9sb3Rpcy1wbGF5ZXIvLi9zcmMvbGliL2luZGV4LnRzP2E2YzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vQ29tcG9uZW50XCI7XG5cbmV4cG9ydCBjbGFzcyBFbnRpdHkgaW1wbGVtZW50cyBDb21wb25lbnQge1xuICBwcml2YXRlIGNvbXBvbmVudHM6IENvbXBvbmVudFtdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHB1YmxpYyBhZGRDb21wb25lbnQ8VCBleHRlbmRzIENvbXBvbmVudD4oY29tcG9uZW50OiBUKTogVCB7XG4gICAgaWYgKGNvbXBvbmVudC5pbml0KSB7XG4gICAgICBjb21wb25lbnQuaW5pdCgpO1xuICAgIH1cbiAgICB0aGlzLmNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlQWxsQ29tcG9uZW50cygpIHtcbiAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaCgoY29tcCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVDb21wb25lbnQoY29tcCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlQ29tcG9uZW50PFQgZXh0ZW5kcyBDb21wb25lbnQ+KGNvbXBvbmVudDogVCk6IFQge1xuICAgIGlmIChjb21wb25lbnQuZGVzdHJveSkge1xuICAgICAgY29tcG9uZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRzLmZpbHRlcigoY29tcCkgPT4ge1xuICAgICAgcmV0dXJuIGNvbXAgIT0gY29tcG9uZW50O1xuICAgIH0pO1xuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBwdWJsaWMgYWRkQ29tcG9uZW50cyhjb21wb25lbnRzOiBDb21wb25lbnRbXSkge1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaCgoY29tcCkgPT4ge1xuICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29tcG9uZW50cygpOiBDb21wb25lbnRbXSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50cztcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb21wb25lbnRCeVR5cGU8VCBleHRlbmRzIENvbXBvbmVudD4odHlwZTogc3RyaW5nKTogVFtdIHtcbiAgICBsZXQgcmV0OiBUW10gPSBbXTtcbiAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaCgoY29tcCkgPT4ge1xuICAgICAgaWYgKGNvbXAuZ2V0VHlwZSgpID09PSB0eXBlKSB7XG4gICAgICAgIHJldC5wdXNoKGNvbXAgYXMgVCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb21wb25lbnRCeVR5cGVTdGFydHNXaXRoKHR5cGU6IHN0cmluZyk6IENvbXBvbmVudFtdIHtcbiAgICBsZXQgcmV0OiBDb21wb25lbnRbXSA9IFtdO1xuICAgIHRoaXMuY29tcG9uZW50cy5mb3JFYWNoKChjb21wKSA9PiB7XG4gICAgICBpZiAoY29tcC5nZXRUeXBlKCkuc3RhcnRzV2l0aCh0eXBlKSkge1xuICAgICAgICByZXQucHVzaChjb21wKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgcHVibGljIGdldEZpcnN0Q29tcG9uZW50QnlUeXBlU3RhcnRzV2l0aDxUIGV4dGVuZHMgQ29tcG9uZW50Pih0eXBlOiBzdHJpbmcpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb21wb25lbnRCeVR5cGVTdGFydHNXaXRoKHR5cGUpWzBdIGFzIFQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGU8VCBleHRlbmRzIENvbXBvbmVudD4odHlwZTogc3RyaW5nKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50QnlUeXBlKHR5cGUpWzBdIGFzIFQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBFbnRpdHkubmFtZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnRpdHk7XG4iLCJpbXBvcnQgRW50aXR5IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2Vjcy9FbnRpdHlcIjtcblxuZXhwb3J0IGNsYXNzIFdvcmxkRW50aXR5IGV4dGVuZHMgRW50aXR5IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICBwdWJsaWMgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBXb3JsZEVudGl0eS5uYW1lO1xuICB9XG59XG4iLCJ2YXIgYXhvbG90aXMgPSBudWxsO1xuXG5leHBvcnQgY29uc3QgR0xPQkFMX1dPUkxEU19FTlRJVFkgPSBcIndvcmxkc1wiO1xuZXhwb3J0IGNvbnN0IEdMT0JBTF9MT0NBTF9NT0RVTEUgPSBcImxvY2FsTW9kdWxlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsU3RvcmFnZSgpOiBhbnkge1xuICAvL25vdCBheG9sb3RpcyBpbiB3aW5kb3cgPT4gY3JlYXRlIGl0XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgaWYgKCEod2luZG93IGFzIGFueSkuYXhvbG90aXMpIHtcbiAgICAgICh3aW5kb3cgYXMgYW55KS5heG9sb3RpcyA9IHt9O1xuICAgIH1cbiAgfVxuXG4gIC8vYXhvbG90aXMgdmFyIG5vdCBpbml0aWFsaXplZCB3aXRoIHdpbmRvd1xuICBpZiAoIWF4b2xvdGlzICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBheG9sb3RpcyA9ICh3aW5kb3cgYXMgYW55KS5heG9sb3RpcztcbiAgfVxuXG4gIGlmICghYXhvbG90aXMpIHtcbiAgICBheG9sb3RpcyA9IHt9O1xuICB9XG5cbiAgcmV0dXJuIGF4b2xvdGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R2xvYmFsU3RvcmFnZVZhbHVlKGtleSwgdmFsdWUpIHtcbiAgbGV0IGdsb2JhbFN0b3JhZ2UgPSBnZXRHbG9iYWxTdG9yYWdlKCk7XG4gIGdsb2JhbFN0b3JhZ2Vba2V5XSA9IHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsU3RvcmFnZVZhbHVlPFQ+KGtleSwgYXV0bzogYm9vbGVhbiA9IHRydWUpOiBUIHtcbiAgbGV0IGdsb2JhbFN0b3JhZ2UgPSBnZXRHbG9iYWxTdG9yYWdlKCk7XG4gIGlmICghZ2xvYmFsU3RvcmFnZVtrZXldICYmIGF1dG8pIHtcbiAgICBnbG9iYWxTdG9yYWdlW2tleV0gPSB7fTtcbiAgfVxuICByZXR1cm4gZ2xvYmFsU3RvcmFnZVtrZXldIGFzIFQ7XG59XG4iLCJpbXBvcnQgeyBnZXRHbG9iYWxTdG9yYWdlVmFsdWUgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvR2xvYmFsXCI7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gXCIuLi9lY3MvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCIuLi9lY3MvV29ybGRFbnRpdHlcIjtcbmltcG9ydCB7IFNlcnZpY2VzIH0gZnJvbSBcIi4vc2VydmljZS9TZXJ2aWNlc1wiO1xuaW1wb3J0IHsgR0xPQkFMX0xPQ0FMX01PRFVMRSB9IGZyb20gXCJAcm9vdC9saWJcIjtcblxuZXhwb3J0IHR5cGUgTW9kdWxlUHJvbWlzZSA9ICgoKSA9PiBQcm9taXNlPExvbmdNb2R1bGU+KSB8ICgoKSA9PiBQcm9taXNlPFNob3J0TW9kdWxlPik7XG5leHBvcnQgdHlwZSBMb25nTW9kdWxlID0geyBtb2R1bGU6IGFueTsgY2xhc3NuYW1lOiBzdHJpbmcgfTsgLy9pbiBjYXNlIHRoZXJlIGlzIHNldmVyYWwgZXhwb3J0IGluIHRoZSBmaWxlXG5leHBvcnQgdHlwZSBTaG9ydE1vZHVsZSA9IHsgZGVmYXVsdDogeyBuYW1lOiBzdHJpbmcgfSB9OyAvL0luIHRoaXMgY2FzZSB0aGUganMgbW9kdWxlIG11c3QgYmUgdGhlIGRlZmF1bHQgZXhwb3J0IG9mIHRoZSBjbGFzc1xuZXhwb3J0IGludGVyZmFjZSBMb2NhbE1vZHVsZXMge1xuICBbaWQ6IHN0cmluZ106IE1vZHVsZVByb21pc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckxvY2FsTW9kdWxlKG5hbWU6IHN0cmluZywgbW9kdWxlOiBNb2R1bGVQcm9taXNlLCBtb2R1bGVTdG9yYWdlPzogTG9jYWxNb2R1bGVzKSB7XG4gIGlmICghbW9kdWxlU3RvcmFnZSkge1xuICAgIG1vZHVsZVN0b3JhZ2UgPSBnZXRHbG9iYWxTdG9yYWdlVmFsdWU8TG9jYWxNb2R1bGVzPihHTE9CQUxfTE9DQUxfTU9EVUxFKTsgLy9HRyBuYW1lXG4gIH1cbiAgaWYgKG1vZHVsZVN0b3JhZ2VbbmFtZV0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb2R1bGUgYWxyZWFkeSBkZWZpbmVkXCIpO1xuICB9XG4gIG1vZHVsZVN0b3JhZ2VbbmFtZV0gPSBtb2R1bGU7XG59XG5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShtb2R1bGU6IGFueSk6IHN0cmluZyB7XG4gIGlmIChtb2R1bGUuY2xhc3NuYW1lKSB7XG4gICAgLy9Mb25nTW9kdWxlIENhc2VcbiAgICByZXR1cm4gbW9kdWxlLmNsYXNzbmFtZTtcbiAgfSBlbHNlIGlmIChtb2R1bGUuZGVmYXVsdCAmJiBtb2R1bGUuZGVmYXVsdC5uYW1lKSB7XG4gICAgLy9TaG9ydE1vZHVsZSBjYXNlXG4gICAgcmV0dXJuIG1vZHVsZS5kZWZhdWx0Lm5hbWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihtb2R1bGUpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBtb2R1bGVcIik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbnRpYXRlTG9jYWxBc3luY01vZHVsZTxUPihmcWNuOiBzdHJpbmcsIGxvY2FsTW9kdWxlczogTG9jYWxNb2R1bGVzLCB3b3JsZDogV29ybGRFbnRpdHksIGNvbmZpZz86IGFueSk6IFByb21pc2U8VD4ge1xuICBjb25zdCBsb2NhbE1vZHVsZSA9IGF3YWl0IGxvY2FsTW9kdWxlc1tmcWNuXSgpO1xuICBsZXQgbW9kdWxlID0gKGxvY2FsTW9kdWxlIGFzIGFueSkubW9kdWxlO1xuICBpZiAoIW1vZHVsZSkge1xuICAgIG1vZHVsZSA9IGxvY2FsTW9kdWxlOyAvL1NvcnRNb2R1bGUgY2FzZSBkZWZpbml0aW9uXG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gbW9kdWxlKSB7XG4gICAgY29uc3Qgc3ViID0gbW9kdWxlW2tleV07XG4gICAgaWYgKHN1Yi5wcm90b3R5cGUgJiYgc3ViLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBnZXRDbGFzc05hbWUobG9jYWxNb2R1bGUpKSB7XG4gICAgICBsZXQgRGVwZW5kZW5jeUNvbXBvbmVudExpc3Q6IENvbXBvbmVudFtdID0gW107XG4gICAgICBpZiAoc3ViLmRlcGVuZGVuY2llcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN1Yi5kZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBkZXAgPSBzdWIuZGVwZW5kZW5jaWVzW2ldO1xuICAgICAgICAgIGxldCBzZXJ2aWNlcyA9IHdvcmxkLmdldEZpcnN0Q29tcG9uZW50QnlUeXBlPFNlcnZpY2VzPihTZXJ2aWNlcy5uYW1lKTtcbiAgICAgICAgICBsZXQgc2VydmljZSA9IGF3YWl0IHNlcnZpY2VzLmdldFNlcnZpY2U8Q29tcG9uZW50PihkZXApO1xuICAgICAgICAgIERlcGVuZGVuY3lDb21wb25lbnRMaXN0LnB1c2goc2VydmljZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjb25maWcgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgc3ViKC4uLkRlcGVuZGVuY3lDb21wb25lbnRMaXN0LCBjb25maWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBzdWIoLi4uRGVwZW5kZW5jeUNvbXBvbmVudExpc3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHN1Ym1vZHVsZSBcIiArIGZxY24gKyBcIiAtIFwiICsgZ2V0Q2xhc3NOYW1lKGxvY2FsTW9kdWxlKSk7XG59XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2Vjcy9Db21wb25lbnRcIjtcbmltcG9ydCB7IGluc3RhbnRpYXRlTG9jYWxBc3luY01vZHVsZSwgTG9jYWxNb2R1bGVzIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0xvY2FsTG9hZGVyXCI7XG5pbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCIuLi9lY3MvV29ybGRFbnRpdHlcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbnRpYXRlQXN5bmNNb2R1bGU8VD4obW9kdWxlTmFtZTogc3RyaW5nLCBtb2R1bGVTdG9yYWdlOiBMb2NhbE1vZHVsZXMsIHdvcmxkPzogV29ybGRFbnRpdHksIGNvbmZpZz86IGFueSk6IFByb21pc2U8VD4ge1xuICBsZXQgbW9kdWxlID0gbnVsbDtcbiAgaWYgKG1vZHVsZVN0b3JhZ2UgJiYgbW9kdWxlU3RvcmFnZVttb2R1bGVOYW1lXSkge1xuICAgIG1vZHVsZSA9IGF3YWl0IGluc3RhbnRpYXRlTG9jYWxBc3luY01vZHVsZTxDb21wb25lbnQ+KG1vZHVsZU5hbWUsIG1vZHVsZVN0b3JhZ2UsIHdvcmxkLCBjb25maWcpO1xuICB9IGVsc2UgaWYgKG1vZHVsZU5hbWUuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAvL1RPRE8gcmVtb3RlIG1vZHVsZSBcImh0dHBzOi8vXCJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZW1vdGUgbW9kdWxlcyBub3QgaW1wbGVtZW50ZWQgeWV0XCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwibG9jYWwgbW9kdWxlIGluc3RhbGxlZDpcIiwgbW9kdWxlU3RvcmFnZSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBtb2R1bGUgLSBwbGVhc2UgcmVnaXN0ZXIgaXQgLSBcIiArIG1vZHVsZU5hbWUpO1xuICB9XG4gIHJldHVybiBtb2R1bGU7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gbG9hZChtb2R1bGVzOiAoKCkgPT4gUHJvbWlzZTxhbnk+KVtdLCBsb2FkZWRDYWxsQmFjazogKHByb2dyZXNzOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQpIHtcbiAgbGV0IHJldDogYW55W10gPSBbXTtcbiAgbGV0IG5iTG9hZGVkID0gMDtcbiAgZm9yIChjb25zdCBwcm9taXNlQ2Igb2YgbW9kdWxlcykge1xuICAgIGNvbnN0IHByb21pc2UgPSBwcm9taXNlQ2IoKTsgLy90cmlnZ2VyIHRoZSBsb2FkXG4gICAgcmV0LnB1c2gocHJvbWlzZSk7XG4gICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIG5iTG9hZGVkKys7XG4gICAgICBsb2FkZWRDYWxsQmFjayhuYkxvYWRlZCwgbW9kdWxlcy5sZW5ndGgpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBQcm9taXNlLmFsbChyZXQpO1xufVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9lY3MvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBsb2FkIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0NvZGVMb2FkZXJcIjtcbmltcG9ydCB7IFdvcmxkRW50aXR5IH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvZWNzL1dvcmxkRW50aXR5XCI7XG5pbXBvcnQgeyBpbnN0YW50aWF0ZUFzeW5jTW9kdWxlIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0pzTG9hZGVyXCI7XG5pbXBvcnQgeyBXb3JsZERlZmluaXRpb24gfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvV29ybGREZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBMb2NhbE1vZHVsZXMgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvTG9jYWxMb2FkZXJcIjtcblxuZXhwb3J0IGNvbnN0IENPREVfTE9BREVSX01PRFVMRV9OQU1FID0gXCJAYXB0ZXJvL2F4b2xvdGlzLXBsYXllci9jb3JlL2xvYWRlci9Jbml0aWFsQ29tcG9uZW50TG9hZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBJbml0aWFsQ29tcG9uZW50TG9hZGVyIGltcGxlbWVudHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBpbml0aWFsTG9hZGluZzogUHJvbWlzZTxhbnk+O1xuICBwcml2YXRlIGluaXRpYWxMb2FkaW5nUmVzb2x2ZXI6ICgodmFsdWU6IGFueSkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgbW9kdWxlU3RvcmFnZTogTG9jYWxNb2R1bGVzO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbExvYWRpbmcgPSBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLmluaXRpYWxMb2FkaW5nUmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBJbml0aWFsQ29tcG9uZW50TG9hZGVyLm5hbWU7XG4gIH1cblxuICBnZXRNb2R1bGVTdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLm1vZHVsZVN0b3JhZ2U7XG4gIH1cblxuICBhc3luYyBhd2FpdEluaXRpYWxMb2FkaW5nKCkge1xuICAgIGF3YWl0IHRoaXMuaW5pdGlhbExvYWRpbmc7XG4gIH1cblxuICBhc3luYyBzdGFydExvYWRpbmcod29ybGQ6IFdvcmxkRW50aXR5LCBzY2VuZTogV29ybGREZWZpbml0aW9uLCBsb2FkZWRDYWxsQmFjazogKHByb2dyZXNzOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQsIG1vZHVsZVN0b3JhZ2U6IExvY2FsTW9kdWxlcykge1xuICAgIHRoaXMubW9kdWxlU3RvcmFnZSA9IG1vZHVsZVN0b3JhZ2U7XG4gICAgaWYgKHNjZW5lLnZlcnNpb24gIT09IFwiMi4wXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkXCIpO1xuICAgIH1cbiAgICBsZXQgcHJvbWlzZXM6ICgoKSA9PiBQcm9taXNlPGFueT4pW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBzY2VuZS5lbnRpdGllcykge1xuICAgICAgZm9yIChjb25zdCBjb21wb25lbnREZWYgb2YgZW50aXR5LmNvbXBvbmVudHMpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IGNvbXBvbmVudERlZi5jb25maWc7XG4gICAgICAgIHByb21pc2VzLnB1c2goXG4gICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgbGV0IG1vZHVsZSA9IGF3YWl0IGluc3RhbnRpYXRlQXN5bmNNb2R1bGU8YW55Pihjb21wb25lbnREZWYubW9kdWxlLCBtb2R1bGVTdG9yYWdlLCB3b3JsZCwgY29uZmlnIHx8IHt9KTsgLy9tb2R1bGUuY3JlYXRlQ29tcG9uZW50KHdvcmxkLCBjb25maWcgfHwge30pO1xuICAgICAgICAgICAgICBsZXQgY29tcG9uZW50ID0gbW9kdWxlLmdldFR5cGUgPyBtb2R1bGUgOiAoKGF3YWl0IG1vZHVsZS5jcmVhdGVDb21wb25lbnQod29ybGQsIGNvbmZpZyB8fCB7fSkpIGFzIENvbXBvbmVudCk7XG4gICAgICAgICAgICAgIGlmICghY29tcG9uZW50LmdldFR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSBjb21wb25lbnQgOiBcIiArIGNvbXBvbmVudERlZi5tb2R1bGUgKyBcIiBcIiArIGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3b3JsZC5hZGRDb21wb25lbnQoY29tcG9uZW50KTsgLy9UT0RPIHdvcmxkIGRlZmF1bHQgYnV0IHNob3VsZCBhZCB0byBhbiBlbnRpdHlcbiAgICAgICAgICAgICAgcmVzb2x2ZShtb2R1bGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcHJvbWlzZSA9IGxvYWQocHJvbWlzZXMsIGxvYWRlZENhbGxCYWNrKTtcbiAgICBwcm9taXNlLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICBpZiAodGhpcy5pbml0aWFsTG9hZGluZ1Jlc29sdmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsTG9hZGluZ1Jlc29sdmVyKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwcm9taXNlLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxufVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9lY3MvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBpbnN0YW50aWF0ZUFzeW5jTW9kdWxlIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0pzTG9hZGVyXCI7XG5pbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCJAcm9vdC9saWJcIjtcbmltcG9ydCB7IEluaXRpYWxDb21wb25lbnRMb2FkZXIsIENPREVfTE9BREVSX01PRFVMRV9OQU1FIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0luaXRpYWxDb21wb25lbnRMb2FkZXJcIjtcbmltcG9ydCB7IElTZXJ2aWNlIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL3NlcnZpY2UvSVNlcnZpY2VcIjtcblxuZXhwb3J0IGNsYXNzIExhenlTZXJ2aWNlcyB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgd29ybGQ6IFdvcmxkRW50aXR5KSB7fVxuXG4gIHNlcnZpY2VBc3luYzogeyBbaWQ6IHN0cmluZ106IFByb21pc2U8SVNlcnZpY2U+IHwgdW5kZWZpbmVkIH0gPSB7fTtcbiAgc2VydmljZTogeyBbaWQ6IHN0cmluZ106IElTZXJ2aWNlIH0gPSB7fTtcblxuICBnZXRXb3JsZCgpOiBXb3JsZEVudGl0eSB7XG4gICAgcmV0dXJuIHRoaXMud29ybGQ7XG4gIH1cblxuICBzZXRTZXJ2aWNlKG1vZHVsZU5hbWU6IHN0cmluZywgc2VydmljZTogSVNlcnZpY2UsIHJlcGxhY2UgPSBmYWxzZSkge1xuICAgIGlmICghcmVwbGFjZSAmJiAodGhpcy5zZXJ2aWNlQXN5bmNbbW9kdWxlTmFtZV0gfHwgdGhpcy5zZXJ2aWNlW21vZHVsZU5hbWVdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VydmljZSBhbHJlYWR5IGV4aXN0ICh1c2UgcmVwbGFjZSB0byBmb3JjZSlcIik7XG4gICAgfVxuICAgIHRoaXMuc2VydmljZUFzeW5jW21vZHVsZU5hbWVdID0gUHJvbWlzZS5yZXNvbHZlKHNlcnZpY2UpO1xuICAgIHRoaXMuc2VydmljZVttb2R1bGVOYW1lXSA9IHNlcnZpY2U7XG4gICAgaWYgKHNlcnZpY2UuaW5pdCkge1xuICAgICAgc2VydmljZS5pbml0KCk7IC8vc2VydmljZSBpbml0XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0U2VydmljZTxUIGV4dGVuZHMgSVNlcnZpY2U+KG1vZHVsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8VD4ge1xuICAgIGlmICh0aGlzLnNlcnZpY2VBc3luY1ttb2R1bGVOYW1lXSkge1xuICAgICAgLy9zZXJ2aWNlIGFscmVhZHkgZG93bmxvYWRpbmcgYWRkIHRoaXMgcmVxdWVzdCB0byBxdWV1ZTtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBhd2FpdCB0aGlzLnNlcnZpY2VBc3luY1ttb2R1bGVOYW1lXTtcbiAgICAgIGlmICghc2VydmljZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlcnJvclwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXJ2aWNlIGFzIFQ7XG4gICAgfVxuICAgIGlmICghdGhpcy5zZXJ2aWNlQXN5bmNbbW9kdWxlTmFtZV0pIHtcbiAgICAgIGxldCBtb2R1bGVzTGlzdCA9ICgoYXdhaXQgdGhpcy5zZXJ2aWNlQXN5bmNbQ09ERV9MT0FERVJfTU9EVUxFX05BTUVdKSBhcyBJbml0aWFsQ29tcG9uZW50TG9hZGVyKS5nZXRNb2R1bGVTdG9yYWdlKCk7XG4gICAgICBsZXQgbW9kdWxlUHJvbWlzZSA9IGluc3RhbnRpYXRlQXN5bmNNb2R1bGU8VD4obW9kdWxlTmFtZSwgbW9kdWxlc0xpc3QsIHRoaXMud29ybGQpO1xuICAgICAgdGhpcy5zZXJ2aWNlQXN5bmNbbW9kdWxlTmFtZV0gPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgICAgICBsZXQgbW9kdWxlOiBhbnkgPSBhd2FpdCBtb2R1bGVQcm9taXNlO1xuICAgICAgICBsZXQgc2VydmljZTogQ29tcG9uZW50ID0gbW9kdWxlLmdldFR5cGUgPyBtb2R1bGUgOiBhd2FpdCBtb2R1bGUuY3JlYXRlU2VydmljZSh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlW21vZHVsZU5hbWVdID0gc2VydmljZTsgLy9tb2R1bGUgcmVzb2x2ZWRcbiAgICAgICAgaWYgKHNlcnZpY2UuaW5pdCkge1xuICAgICAgICAgIHNlcnZpY2UuaW5pdCgpOyAvL3NlcnZpY2UgaW5pdFxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoc2VydmljZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLnNlcnZpY2VBc3luY1ttb2R1bGVOYW1lXSkgYXMgVDtcbiAgfVxufVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9lY3MvQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBMYXp5U2VydmljZXMgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvc2VydmljZS9MYXp5U2VydmljZXNcIjtcbmltcG9ydCB7IElTZXJ2aWNlLCBJU2VydmljZXMgfSBmcm9tIFwiQHJvb3QvbGliXCI7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlcyBleHRlbmRzIExhenlTZXJ2aWNlcyBpbXBsZW1lbnRzIENvbXBvbmVudCwgSVNlcnZpY2VzIHtcbiAgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBTZXJ2aWNlcy5uYW1lO1xuICB9XG5cbiAgZ2V0U2VydmljZVN5bmM8VCBleHRlbmRzIElTZXJ2aWNlPihtb2R1bGVOYW1lOiBzdHJpbmcpOiBUIHtcbiAgICBpZiAodGhpcy5zZXJ2aWNlW21vZHVsZU5hbWVdKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlW21vZHVsZU5hbWVdIGFzIFQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInNlcnZpY2Ugbm90IGZvdW5kIDogXCIgKyBtb2R1bGVOYW1lKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFNlcnZpY2VzIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL3NlcnZpY2UvU2VydmljZXNcIjtcbmltcG9ydCB7IEluaXRpYWxDb21wb25lbnRMb2FkZXIsIENPREVfTE9BREVSX01PRFVMRV9OQU1FIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0luaXRpYWxDb21wb25lbnRMb2FkZXJcIjtcbmltcG9ydCB7IGdldEdsb2JhbFN0b3JhZ2VWYWx1ZSwgR0xPQkFMX0xPQ0FMX01PRFVMRSwgR0xPQkFMX1dPUkxEU19FTlRJVFksIHNldEdsb2JhbFN0b3JhZ2VWYWx1ZSB9IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2xvYWRlci9HbG9iYWxcIjtcbmltcG9ydCB7IExvY2FsTW9kdWxlcyB9IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2xvYWRlci9Mb2NhbExvYWRlclwiO1xuaW1wb3J0IHsgV29ybGREZWZpbml0aW9uIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL1dvcmxkRGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgV29ybGRFbnRpdHkgfSBmcm9tIFwiQHJvb3QvbGliXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVXb3JsZFN5bmMoXG4gIGluaXRpYWxTY2VuZTogV29ybGREZWZpbml0aW9uID0ge1xuICAgIHZlcnNpb246IFwiMi4wXCIsXG4gICAgZW50aXRpZXM6IFtdLFxuICB9LFxuICBsb2FkZWRDYWxsQmFjazogKHByb2dyZXNzOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHZvaWQgPSAoKSA9PiB7fSxcbiAgZmluaXNoZWQ6ICh3b3JsZDogV29ybGRFbnRpdHkpID0+IHZvaWQgPSAoKSA9PiB7fSxcbiAgbW9kdWxlU3RvcmFnZT86IExvY2FsTW9kdWxlcyxcbiAgd29ybGQ/OiBXb3JsZEVudGl0eVxuKSB7XG4gIGlmICghd29ybGQpIHtcbiAgICB3b3JsZCA9IG5ldyBXb3JsZEVudGl0eSgpO1xuICB9XG4gIGlmICghZ2V0R2xvYmFsU3RvcmFnZVZhbHVlKEdMT0JBTF9XT1JMRFNfRU5USVRZLCBmYWxzZSkpIHtcbiAgICBzZXRHbG9iYWxTdG9yYWdlVmFsdWUoR0xPQkFMX1dPUkxEU19FTlRJVFksIFt3b3JsZF0pO1xuICB9IGVsc2Uge1xuICAgIGdldEdsb2JhbFN0b3JhZ2VWYWx1ZTxXb3JsZEVudGl0eVtdPihHTE9CQUxfV09STERTX0VOVElUWSkucHVzaCh3b3JsZCk7XG4gIH1cbiAgaWYgKCFtb2R1bGVTdG9yYWdlKSB7XG4gICAgbW9kdWxlU3RvcmFnZSA9IGdldEdsb2JhbFN0b3JhZ2VWYWx1ZTxMb2NhbE1vZHVsZXM+KEdMT0JBTF9MT0NBTF9NT0RVTEUpO1xuICB9XG4gIGxldCBzZXJ2aWNlRW50aXR5ID0gbmV3IFNlcnZpY2VzKHdvcmxkKTtcbiAgd29ybGQuYWRkQ29tcG9uZW50KHNlcnZpY2VFbnRpdHkpO1xuXG4gIGxldCBzdGF0aWNTZXJ2aWNlcyA9IHt9O1xuICBpZiAoIXN0YXRpY1NlcnZpY2VzW0NPREVfTE9BREVSX01PRFVMRV9OQU1FXSkge1xuICAgIHN0YXRpY1NlcnZpY2VzW0NPREVfTE9BREVSX01PRFVMRV9OQU1FXSA9IG5ldyBJbml0aWFsQ29tcG9uZW50TG9hZGVyKCk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGljU2VydmljZXMpIHtcbiAgICB3b3JsZC5nZXRGaXJzdENvbXBvbmVudEJ5VHlwZTxTZXJ2aWNlcz4oU2VydmljZXMubmFtZSkuc2V0U2VydmljZShrZXksIHN0YXRpY1NlcnZpY2VzW2tleV0pO1xuICB9XG5cbiAgKHN0YXRpY1NlcnZpY2VzW0NPREVfTE9BREVSX01PRFVMRV9OQU1FXSBhcyBJbml0aWFsQ29tcG9uZW50TG9hZGVyKS5zdGFydExvYWRpbmcod29ybGQsIGluaXRpYWxTY2VuZSwgbG9hZGVkQ2FsbEJhY2ssIG1vZHVsZVN0b3JhZ2UpLnRoZW4oKCkgPT4ge1xuICAgIGZpbmlzaGVkKHdvcmxkKTtcbiAgfSk7XG4gIHJldHVybiB3b3JsZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdvcmxkKFxuICBpbml0aWFsU2NlbmU6IFdvcmxkRGVmaW5pdGlvbiA9IHtcbiAgICB2ZXJzaW9uOiBcIjIuMFwiLFxuICAgIGVudGl0aWVzOiBbXSxcbiAgfSxcbiAgbG9hZGVkQ2FsbEJhY2s6IChwcm9ncmVzczogbnVtYmVyLCB0b3RhbDogbnVtYmVyKSA9PiB2b2lkID0gKCkgPT4ge30sXG4gIG1vZHVsZVN0b3JhZ2U/OiBMb2NhbE1vZHVsZXMsXG4gIHdvcmxkPzogV29ybGRFbnRpdHlcbikge1xuICByZXR1cm4gbmV3IFByb21pc2U8V29ybGRFbnRpdHk+KChyZXNvbHZlKSA9PiB7XG4gICAgY3JlYXRlV29ybGRTeW5jKGluaXRpYWxTY2VuZSwgbG9hZGVkQ2FsbEJhY2ssIHJlc29sdmUsIG1vZHVsZVN0b3JhZ2UsIHdvcmxkKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgeyBXb3JsZEVudGl0eSB9IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2Vjcy9Xb3JsZEVudGl0eVwiO1xuaW1wb3J0IHsgY3JlYXRlV29ybGQgfSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9sb2FkZXIvQmFzaWNJbml0XCI7XG5pbXBvcnQgeyBXb3JsZERlZmluaXRpb24sIFdvcmxkRGVmaW5pdGlvblYyIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL1dvcmxkRGVmaW5pdGlvblwiO1xuXG5leHBvcnQgY29uc3QgQlVJTERfVkVSU0lPTiA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlLmpzb25cIikudmVyc2lvbjtcbmNvbnNvbGUubG9nKFwiQXhvbG90aXMtcGxheWVyIHZlcnNpb24gOlwiICsgQlVJTERfVkVSU0lPTik7XG5cbmNvbnN0IHdpbmRvd1JlYWR5ID0gKGNhbGxCYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgJiYgZG9jdW1lbnQuYm9keSkge1xuICAgIGNhbGxCYWNrKCk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGNhbGxCYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRIdG1sRnJvbVVybChcbiAgdXJsOiBzdHJpbmcsXG4gIGNvbmZpZzoge1xuICAgIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZDtcbiAgICBvbkxvYWRlZD86ICgpID0+IHZvaWQ7XG4gIH0gPSB7fVxuKTogUHJvbWlzZTxXb3JsZEVudGl0eT4ge1xuICBpZiAoIWNvbmZpZy5vblByb2dyZXNzKSB7XG4gICAgY29uZmlnLm9uUHJvZ3Jlc3MgPSAocHJvZ3Jlc3M6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJbXCIgKyB1cmwgKyBcIl0gOiBbXCIgKyBwcm9ncmVzcyArIFwiL1wiICsgdG90YWwgKyBcIl1cIik7XG4gICAgfTtcbiAgfVxuICBpZiAoIWNvbmZpZy5vbkxvYWRlZCkge1xuICAgIGNvbmZpZy5vbkxvYWRlZCA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1wiICsgdXJsICsgXCJdIDogbG9hZGluZyBjb21wbGV0ZVwiKTtcbiAgICB9O1xuICB9XG4gIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBodG1sID0gYXdhaXQgci50ZXh0KCk7XG4gIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgY29uc3QgZG9jdW1lbnQgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpO1xuICBsZXQgc2NlbmU6IEhUTUxDb2xsZWN0aW9uID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImF4LXNjZW5lXCIpOyAvL1RPRE8gYXNzdW1lIG9ubHkgb25lIHNjZW5lXG4gIGlmICghc2NlbmUgfHwgKHNjZW5lICYmIHNjZW5lLmxlbmd0aCA9PSAwKSkge1xuICAgIGNvbnNvbGUud2FybihcIkF4b2xvdGlzIHNjZW5lIG5vdCBmb3VuZCAobm8gdGFnIGF4LXNjZW5lKVwiKTtcbiAgICBjb25maWcub25Mb2FkZWQoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5sb2coc2NlbmUpO1xuICBjb25zdCB3b3JsZCA9IGF3YWl0IGNyZWF0ZVdvcmxkKGh0bWxUb0pzb24oc2NlbmUpLCBjb25maWcub25Qcm9ncmVzcyk7XG4gIGNvbmZpZy5vbkxvYWRlZCgpO1xuICByZXR1cm4gd29ybGQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0SHRtbChcbiAgY29uZmlnOiB7XG4gICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyLCB0b3RhbDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIG9uTG9hZGVkPzogKHdvcmxkOiBXb3JsZEVudGl0eSkgPT4gdm9pZDtcbiAgfSA9IHt9XG4pIHtcbiAgaWYgKCFjb25maWcub25Qcm9ncmVzcykge1xuICAgIGNvbmZpZy5vblByb2dyZXNzID0gKHByb2dyZXNzOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1wiICsgcHJvZ3Jlc3MgKyBcIi9cIiArIHRvdGFsICsgXCJdXCIpO1xuICAgIH07XG4gIH1cbiAgaWYgKCFjb25maWcub25Mb2FkZWQpIHtcbiAgICBjb25maWcub25Mb2FkZWQgPSAod29ybGQ6IFdvcmxkRW50aXR5KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmcgY29tcGxldGVcIik7XG4gICAgfTtcbiAgfVxuICB3aW5kb3dSZWFkeSgoKSA9PiB7XG4gICAgbGV0IHNjZW5lOiBIVE1MQ29sbGVjdGlvbiA9IHdpbmRvdy5kb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYXgtc2NlbmVcIik7IC8vVE9ETyBhc3N1bWUgb25seSBvbmUgc2NlbmVcbiAgICBpZiAoIXNjZW5lIHx8IChzY2VuZSAmJiBzY2VuZS5sZW5ndGggPT0gMCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkF4b2xvdGlzIHNjZW5lIG5vdCBmb3VuZCAobm8gdGFnIGF4LXNjZW5lKVwiKTtcbiAgICAgIGNyZWF0ZVdvcmxkKCkudGhlbihjb25maWcub25Mb2FkZWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhzY2VuZSk7XG4gICAgY3JlYXRlV29ybGQoaHRtbFRvSnNvbihzY2VuZSksIGNvbmZpZy5vblByb2dyZXNzKS50aGVuKGNvbmZpZy5vbkxvYWRlZCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBodG1sVG9Kc29uKHNjZW5lOiBIVE1MQ29sbGVjdGlvbik6IFdvcmxkRGVmaW5pdGlvbiB7XG4gIGxldCBzY2VuZUVsID0gc2NlbmVbMF07XG4gIGNvbnN0IHJldDogV29ybGREZWZpbml0aW9uVjIgPSB7XG4gICAgdmVyc2lvbjogXCIyLjBcIixcbiAgICBlbnRpdGllczogW10sXG4gIH07XG4gIC8vIEB0cy1pZ25vcmVcbiAgZm9yIChjb25zdCBlbnRpdHkgb2Ygc2NlbmVFbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImF4LWVudGl0eVwiKSkge1xuICAgIGxldCBlbnRpdHlSZXQgPSB7IGNvbXBvbmVudHM6IFtdIH07XG5cbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudEVsIG9mIGVudGl0eS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImF4LWNvbXBvbmVudFwiKSkge1xuICAgICAgbGV0IGNvcnJlY3RKc29uID0gSlNPTi5zdHJpbmdpZnkoe30pO1xuICAgICAgaWYgKGNvbXBvbmVudEVsLmdldEF0dHJpYnV0ZShcImNvbmZpZ1wiKSkge1xuICAgICAgICAvL2NvbnZlcnQgcmVsYXhlZCBqc29uIHRvIHByb3BlciBqc29uXG4gICAgICAgIGNvcnJlY3RKc29uID0gY29tcG9uZW50RWwuZ2V0QXR0cmlidXRlKFwiY29uZmlnXCIpLnJlcGxhY2UoLyhbJ1wiXSk/KFthLXowLTlBLVpfXSspKFsnXCJdKT86L2csICdcIiQyXCI6ICcpO1xuICAgICAgfVxuICAgICAgbGV0IGNvbXBvbmVudCA9IHtcbiAgICAgICAgbW9kdWxlOiBjb21wb25lbnRFbC5nZXRBdHRyaWJ1dGUoXCJtb2R1bGVcIiksXG4gICAgICAgIGNvbmZpZzogSlNPTi5wYXJzZShjb3JyZWN0SnNvbiksXG4gICAgICB9O1xuICAgICAgZW50aXR5UmV0LmNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgIH1cbiAgICByZXQuZW50aXRpZXMucHVzaChlbnRpdHlSZXQpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG4iLCJpbXBvcnQgeyBnZXRHbG9iYWxTdG9yYWdlVmFsdWUsIEdMT0JBTF9XT1JMRFNfRU5USVRZLCBJU2VydmljZSwgU2VydmljZXMsIFdvcmxkRW50aXR5IH0gZnJvbSBcIkByb290L2xpYlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsV29ybGQoKSB7XG4gIGxldCB3b3JsZHMgPSBnZXRHbG9iYWxTdG9yYWdlVmFsdWU8V29ybGRFbnRpdHlbXT4oR0xPQkFMX1dPUkxEU19FTlRJVFksIGZhbHNlKTtcbiAgaWYgKHdvcmxkcyAmJiB3b3JsZHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB3b3JsZHNbMF07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gQXhvbG90aXMgd29ybGQgaW5pdGlhbGl6ZWRcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VTeW5jPFQgZXh0ZW5kcyBJU2VydmljZT4oc2VydmljZU5hbWU6IHN0cmluZywgd29ybGQ6IFdvcmxkRW50aXR5ID0gbnVsbCk6IFQge1xuICBpZiAoIXdvcmxkKSB7XG4gICAgd29ybGQgPSBnZXRHbG9iYWxXb3JsZCgpO1xuICB9XG4gIHJldHVybiB3b3JsZC5nZXRGaXJzdENvbXBvbmVudEJ5VHlwZTxTZXJ2aWNlcz4oU2VydmljZXMubmFtZSkuZ2V0U2VydmljZVN5bmM8VD4oc2VydmljZU5hbWUpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmljZTxUIGV4dGVuZHMgSVNlcnZpY2U+KHNlcnZpY2VOYW1lOiBzdHJpbmcsIHdvcmxkOiBXb3JsZEVudGl0eSA9IG51bGwpOiBQcm9taXNlPFQ+IHtcbiAgaWYgKCF3b3JsZCkge1xuICAgIHdvcmxkID0gZ2V0R2xvYmFsV29ybGQoKTtcbiAgfVxuICByZXR1cm4gd29ybGQuZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGU8U2VydmljZXM+KFNlcnZpY2VzLm5hbWUpLmdldFNlcnZpY2U8VD4oc2VydmljZU5hbWUpO1xufVxuIiwiaW1wb3J0IEVudGl0eSBmcm9tIFwiQHJvb3QvbGliL21vZHVsZXMvY29yZS9lY3MvRW50aXR5XCI7XG5pbXBvcnQgeyBpbnN0YW50aWF0ZUFzeW5jTW9kdWxlIH0gZnJvbSBcIkByb290L2xpYi9tb2R1bGVzL2NvcmUvbG9hZGVyL0pzTG9hZGVyXCI7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gXCJAcm9vdC9saWIvbW9kdWxlcy9jb3JlL2Vjcy9Db21wb25lbnRcIjtcbmltcG9ydCB7IENPREVfTE9BREVSX01PRFVMRV9OQU1FLCBJbml0aWFsQ29tcG9uZW50TG9hZGVyLCBTZXJ2aWNlcywgV29ybGRFbnRpdHkgfSBmcm9tIFwiQHJvb3QvbGliXCI7XG5cbmV4cG9ydCBjbGFzcyBMYXp5RW50aXR5IGV4dGVuZHMgRW50aXR5IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB3b3JsZDogV29ybGRFbnRpdHkpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgYXN5bmMgYWRkQ29tcG9uZW50QXN5bmM8VCBleHRlbmRzIENvbXBvbmVudD4obW9kdWxlTmFtZTogc3RyaW5nLCBjb25maWc6IGFueSA9IHt9KTogUHJvbWlzZTxUPiB7XG4gICAgbGV0IHNlcnZpY2VzID0gdGhpcy53b3JsZC5nZXRGaXJzdENvbXBvbmVudEJ5VHlwZTxTZXJ2aWNlcz4oU2VydmljZXMubmFtZSk7XG4gICAgbGV0IGNvZGVMb2FkZXIgPSBhd2FpdCBzZXJ2aWNlcy5nZXRTZXJ2aWNlPEluaXRpYWxDb21wb25lbnRMb2FkZXI+KENPREVfTE9BREVSX01PRFVMRV9OQU1FKTtcbiAgICBsZXQgbW9kdWxlUHJvbWlzZSA9IGluc3RhbnRpYXRlQXN5bmNNb2R1bGU8VD4obW9kdWxlTmFtZSwgY29kZUxvYWRlci5nZXRNb2R1bGVTdG9yYWdlKCksIHRoaXMud29ybGQsIGNvbmZpZyB8fCB7fSk7XG5cbiAgICBsZXQgbW9kdWxlOiBhbnkgPSBhd2FpdCBhd2FpdCBtb2R1bGVQcm9taXNlO1xuICAgIGxldCBjb21wb25lbnQgPSBtb2R1bGUuZ2V0VHlwZSA/IG1vZHVsZSA6ICgoYXdhaXQgbW9kdWxlLmNyZWF0ZUNvbXBvbmVudCh0aGlzLndvcmxkLCBjb25maWcgfHwge30pKSBhcyBDb21wb25lbnQpO1xuICAgIHJldHVybiBjb21wb25lbnQgYXMgVDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIExhenlFbnRpdHkubmFtZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kdWxlUHJvbWlzZSwgcmVnaXN0ZXJMb2NhbE1vZHVsZSB9IGZyb20gXCJAcm9vdC9saWJcIjtcblxuLyoqXG4gKiBBbiBJdGVtIChvciBTbWFydEl0ZW0pIGlzIGEgc2V0IG9mIE1vZHVsZSAoU2VydmljZXMgYW5kL29yIENvbXBvbmVudClcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJdGVtIHtcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIEFzeW5jaHJvbm91cy9EeW5hbWljIENvbXBvbmVudCBvciBTZXJ2aWNlXG4gICAqL1xuICBtb2R1bGVzKCk6IHsgW2lkOiBzdHJpbmddOiBNb2R1bGVQcm9taXNlIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlckl0ZW0oaXRlbTogSXRlbSkge1xuICBsZXQgbW9kdWxlcyA9IGl0ZW0ubW9kdWxlcygpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBtb2R1bGVzKSB7XG4gICAgcmVnaXN0ZXJMb2NhbE1vZHVsZShrZXksIG1vZHVsZXNba2V5XSk7XG4gIH1cbn1cbiIsIi8qXG4gKiBEZWZpbmVzIHdoYXQgaXMgZXhwb3J0ZWRcbiAqICovXG5leHBvcnQgKiBmcm9tIFwiLi9tb2R1bGVzL2NvcmUvZWNzL0NvbXBvbmVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2Vjcy9Db21wb25lbnRGYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tb2R1bGVzL2NvcmUvZWNzL0VudGl0eVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2Vjcy9Xb3JsZEVudGl0eVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9HbG9iYWxcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZHVsZXMvY29yZS9sb2FkZXIvQmFzaWNJbml0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tb2R1bGVzL2NvcmUvbG9hZGVyL0RvbUluaXRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZHVsZXMvY29yZS9sb2FkZXIvQmFzaWNJbml0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tb2R1bGVzL2NvcmUvbG9hZGVyL0luaXRpYWxDb21wb25lbnRMb2FkZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZHVsZXMvY29yZS9sb2FkZXIvc2VydmljZS9MYXp5U2VydmljZXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZHVsZXMvY29yZS9sb2FkZXIvc2VydmljZS9TZXJ2aWNlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9tb2R1bGVzL2NvcmUvbG9hZGVyL3NlcnZpY2UvU2VydmljZXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL21vZHVsZXMvY29yZS9sb2FkZXIvc2VydmljZS9JU2VydmljZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9zZXJ2aWNlL1NlcnZpY2VVdGlsc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9zZXJ2aWNlL0lTZXJ2aWNlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9Mb2NhbExvYWRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9lbnRpdHkvTGF6eUVudGl0eVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbW9kdWxlcy9jb3JlL2xvYWRlci9JdGVtXCI7XG4iXSwibmFtZXMiOlsiRW50aXR5IiwiY29uc3RydWN0b3IiLCJhZGRDb21wb25lbnQiLCJjb21wb25lbnQiLCJpbml0IiwiY29tcG9uZW50cyIsInB1c2giLCJyZW1vdmVBbGxDb21wb25lbnRzIiwiZm9yRWFjaCIsImNvbXAiLCJyZW1vdmVDb21wb25lbnQiLCJkZXN0cm95IiwiZmlsdGVyIiwiYWRkQ29tcG9uZW50cyIsImdldENvbXBvbmVudHMiLCJnZXRDb21wb25lbnRCeVR5cGUiLCJ0eXBlIiwicmV0IiwiZ2V0VHlwZSIsImdldENvbXBvbmVudEJ5VHlwZVN0YXJ0c1dpdGgiLCJzdGFydHNXaXRoIiwiZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGVTdGFydHNXaXRoIiwiZ2V0Rmlyc3RDb21wb25lbnRCeVR5cGUiLCJuYW1lIiwiV29ybGRFbnRpdHkiLCJheG9sb3RpcyIsIkdMT0JBTF9XT1JMRFNfRU5USVRZIiwiR0xPQkFMX0xPQ0FMX01PRFVMRSIsImdldEdsb2JhbFN0b3JhZ2UiLCJ3aW5kb3ciLCJzZXRHbG9iYWxTdG9yYWdlVmFsdWUiLCJrZXkiLCJ2YWx1ZSIsImdsb2JhbFN0b3JhZ2UiLCJnZXRHbG9iYWxTdG9yYWdlVmFsdWUiLCJhdXRvIiwiU2VydmljZXMiLCJyZWdpc3RlckxvY2FsTW9kdWxlIiwibW9kdWxlIiwibW9kdWxlU3RvcmFnZSIsIkVycm9yIiwiZ2V0Q2xhc3NOYW1lIiwiY2xhc3NuYW1lIiwiZGVmYXVsdCIsImNvbnNvbGUiLCJlcnJvciIsImluc3RhbnRpYXRlTG9jYWxBc3luY01vZHVsZSIsImZxY24iLCJsb2NhbE1vZHVsZXMiLCJ3b3JsZCIsImNvbmZpZyIsImxvY2FsTW9kdWxlIiwic3ViIiwicHJvdG90eXBlIiwiRGVwZW5kZW5jeUNvbXBvbmVudExpc3QiLCJkZXBlbmRlbmNpZXMiLCJpIiwibGVuZ3RoIiwiZGVwIiwic2VydmljZXMiLCJzZXJ2aWNlIiwiZ2V0U2VydmljZSIsInVuZGVmaW5lZCIsImluc3RhbnRpYXRlQXN5bmNNb2R1bGUiLCJtb2R1bGVOYW1lIiwibG9nIiwibG9hZCIsIm1vZHVsZXMiLCJsb2FkZWRDYWxsQmFjayIsIm5iTG9hZGVkIiwicHJvbWlzZUNiIiwicHJvbWlzZSIsInRoZW4iLCJQcm9taXNlIiwiYWxsIiwiQ09ERV9MT0FERVJfTU9EVUxFX05BTUUiLCJJbml0aWFsQ29tcG9uZW50TG9hZGVyIiwiaW5pdGlhbExvYWRpbmciLCJyZXNvbHZlIiwiaW5pdGlhbExvYWRpbmdSZXNvbHZlciIsImdldE1vZHVsZVN0b3JhZ2UiLCJhd2FpdEluaXRpYWxMb2FkaW5nIiwic3RhcnRMb2FkaW5nIiwic2NlbmUiLCJ2ZXJzaW9uIiwicHJvbWlzZXMiLCJlbnRpdHkiLCJlbnRpdGllcyIsImNvbXBvbmVudERlZiIsInJlamVjdCIsImNyZWF0ZUNvbXBvbmVudCIsImNhdGNoIiwicmVhc29uIiwiTGF6eVNlcnZpY2VzIiwiZ2V0V29ybGQiLCJzZXRTZXJ2aWNlIiwicmVwbGFjZSIsInNlcnZpY2VBc3luYyIsIm1vZHVsZXNMaXN0IiwibW9kdWxlUHJvbWlzZSIsImNyZWF0ZVNlcnZpY2UiLCJnZXRTZXJ2aWNlU3luYyIsImNyZWF0ZVdvcmxkU3luYyIsImluaXRpYWxTY2VuZSIsImZpbmlzaGVkIiwic2VydmljZUVudGl0eSIsInN0YXRpY1NlcnZpY2VzIiwiY3JlYXRlV29ybGQiLCJCVUlMRF9WRVJTSU9OIiwicmVxdWlyZSIsIndpbmRvd1JlYWR5IiwiY2FsbEJhY2siLCJkb2N1bWVudCIsInJlYWR5U3RhdGUiLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImluaXRIdG1sRnJvbVVybCIsInVybCIsIm9uUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsInRvdGFsIiwib25Mb2FkZWQiLCJyIiwiZmV0Y2giLCJodG1sIiwidGV4dCIsInBhcnNlciIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwid2FybiIsImh0bWxUb0pzb24iLCJpbml0SHRtbCIsInNjZW5lRWwiLCJlbnRpdHlSZXQiLCJjb21wb25lbnRFbCIsImNvcnJlY3RKc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEF0dHJpYnV0ZSIsInBhcnNlIiwiZ2V0R2xvYmFsV29ybGQiLCJ3b3JsZHMiLCJzZXJ2aWNlTmFtZSIsIkxhenlFbnRpdHkiLCJhZGRDb21wb25lbnRBc3luYyIsImNvZGVMb2FkZXIiLCJyZWdpc3Rlckl0ZW0iLCJpdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///660\n')},147:function(Q){Q.exports={i8:"2.0.0"}}},__webpack_module_cache__={};function __webpack_require__(Q){var B=__webpack_module_cache__[Q];if(void 0!==B)return B.exports;var F=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](F,F.exports,__webpack_require__),F.exports}__webpack_require__.d=function(Q,B){for(var F in B)__webpack_require__.o(B,F)&&!__webpack_require__.o(Q,F)&&Object.defineProperty(Q,F,{enumerable:!0,get:B[F]})},__webpack_require__.o=function(Q,B){return Object.prototype.hasOwnProperty.call(Q,B)},__webpack_require__.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(660);return __webpack_exports__}()}));